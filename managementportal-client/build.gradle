/*
 * Copyright (c) 2020. The Hyve
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 *
 * See the file LICENSE in the root of this repository.
 */
plugins {
    id 'org.jetbrains.kotlin.jvm' version "1.4.32"
    id 'org.jetbrains.dokka' version "1.4.32"
    id 'maven-publish'
}

description = "Kotlin ManagementPortal client"

repositories {
    mavenCentral()
}

ext {
    jacksonModuleVersion = "2.12.3"
    okhttpVersion = "4.9.1"
}

dependencies {
    api("org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.4.32")
    implementation("org.jetbrains.kotlin:kotlin-reflect:1.4.32")
    api(project(":oauth-client-util"))

    implementation group: 'com.squareup.okhttp3', name: 'okhttp', version: okhttpVersion

    implementation("com.fasterxml.jackson.module:jackson-module-kotlin:$jacksonModuleVersion")
    implementation("com.fasterxml.jackson.datatype:jackson-datatype-jsr310:$jacksonModuleVersion")
    runtimeOnly("com.fasterxml.jackson.datatype:jackson-datatype-jdk8:$jacksonModuleVersion")

    dokkaHtmlPlugin("org.jetbrains.dokka:kotlin-as-java-plugin:1.4.32")
}

compileKotlin {
    kotlinOptions {
        jvmTarget = "11"
        apiVersion = "1.4"
        languageVersion = "1.4"
    }
}

task ghPagesJavadoc(type: Copy, dependsOn: dokkaJavadoc) {
    from file("$buildDir/dokka/javadoc")
    into file("$rootDir/public/managementportal-client-javadoc")
}

ext.isShadowed = false
ext.projectLanguage = "kotlin"
ext.publishToMavenCentral = true

apply from: "$rootDir/gradle/publishing.gradle"
