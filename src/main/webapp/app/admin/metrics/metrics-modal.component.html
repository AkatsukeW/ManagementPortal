<!-- Modal used to display the threads dump -->
<div class="modal-header">
    <h4 class="modal-title" [translate]="'metrics.jvm.threads.dump.title'"></h4>
    <button type="button" class="close" (click)="activeModal.dismiss('closed')">&times;</button>
</div>
<div class="modal-body">
    <span class="badge badge-primary" (click)="threadDumpFilter = {}">All&nbsp;<span class="badge badge-pill badge-default">{{threadDumpAll}}</span></span>&nbsp;
    <span class="badge badge-success" (click)="threadDumpFilter = {threadState: 'RUNNABLE'}">Runnable&nbsp;<span class="badge badge-pill badge-default">{{threadDumpRunnable}}</span></span>&nbsp;
    <span class="badge badge-info" (click)="threadDumpFilter = {threadState: 'WAITING'}">Waiting&nbsp;<span class="badge badge-pill badge-default">{{threadDumpWaiting}}</span></span>&nbsp;
    <span class="badge badge-warning" (click)="threadDumpFilter = {threadState: 'TIMED_WAITING'}">Timed Waiting&nbsp;<span class="badge badge-pill badge-default">{{threadDumpTimedWaiting}}</span></span>&nbsp;
    <span class="badge badge-danger" (click)="threadDumpFilter = {threadState: 'BLOCKED'}">Blocked&nbsp;<span class="badge badge-pill badge-default">{{threadDumpBlocked}}</span></span>&nbsp;
    <div class="mt-2">&nbsp;</div>
    <div class="pad" *ngFor="let thread of threads">
        <h6>
            <span class="badge" [ngClass]="getBadgeClass(thread.threadState)">{{thread.threadState}}</span>&nbsp;{{thread.threadName}} (ID {{thread.threadId}})
            <a (click)="thread.show = !thread.show" href="javascript:void(0);">
               <span [hidden]="thread.show" [translate]="'metrics.jvm.threads.dump.show'"></span>
               <span [hidden]="!thread.show" [translate]="'metrics.jvm.threads.dump.hide'"></span>
            </a>
        </h6>
        <div class="card" [hidden]="!thread.show">
            <div class="card-block">
                <div *ngFor="let st of thread.stackTrace" class="break">
                    <samp>{{st.className}}.{{st.methodName}}(<code>{{st.fileName}}:{{st.lineNumber}}</code>)</samp>
                    <span class="mt-1"></span>
                </div>
            </div>
        </div>
        <table class="table table-sm table-responsive">
            <thead>
                <tr>
                    <th class="text-right" [translate]="'metrics.jvm.threads.dump.blockedtime'"></th>
                    <th class="text-right" [translate]="'metrics.jvm.threads.dump.blockedcount'"></th>
                    <th class="text-right" [translate]="'metrics.jvm.threads.dump.waitedtime'"></th>
                    <th class="text-right" [translate]="'metrics.jvm.threads.dump.waitedcount'"></th>
                    <th [translate]="'metrics.jvm.threads.dump.lockname'"></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>{{thread.blockedTime}}</td>
                    <td>{{thread.blockedCount}}</td>
                    <td>{{thread.waitedTime}}</td>
                    <td>{{thread.waitedCount}}</td>
                    <td><code>{{thread.lockName}}</code></td>
                </tr>
            </tbody>
        </table>

    </div>
</div>
<div class="modal-footer">
    <button type="button" class="btn btn-secondary pull-left" data-dismiss="modal" (click)="activeModal.dismiss('closed')">Done</button>
</div>
